
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProcureFlow - New Request</title>
    <link rel="stylesheet" href="/static/css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="layout">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <div class="logo-icon">P</div>
                    <div class="logo-text">ProcureFlow</div>
                </div>
            </div>
            <div class="sidebar-content">
                <ul class="sidebar-menu">
                    <li><a href="/"><i class="fas fa-home"></i><span>Dashboard</span></a></li>
                    <li class="active"><a href="/requests"><i class="fas fa-shopping-cart"></i><span>Purchase Requests</span></a></li>
                    <li><a href="/negotiations"><i class="fas fa-comments"></i><span>Negotiations</span></a></li>
                    <li><a href="/orders"><i class="fas fa-file-alt"></i><span>Purchase Orders</span></a></li>
                    <li><a href="/suppliers"><i class="fas fa-users"></i><span>Suppliers</span></a></li>
                    <li><a href="#"><i class="fas fa-clock"></i><span>Order Tracking</span></a></li>
                    <li><a href="#"><i class="fas fa-box"></i><span>Inventory</span></a></li>
                    <li><a href="#"><i class="fas fa-chart-bar"></i><span>Reports</span></a></li>
                    <li><a href="#"><i class="fas fa-cog"></i><span>Settings</span></a></li>
                </ul>
            </div>
            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-details">
                        <div class="user-name">John Doe</div>
                        <div class="user-role">Procurement Manager</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Top Navigation -->
            <div class="top-nav">
                <div class="sidebar-toggle">
                    <i class="fas fa-bars"></i>
                </div>
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search...">
                </div>
                <div class="nav-actions">
                    <button class="icon-button" title="Create New Request">
                        <i class="fas fa-plus"></i>
                    </button>
                    <button class="icon-button" title="Messages">
                        <i class="fas fa-envelope"></i>
                        <span class="notification-badge"></span>
                    </button>
                    <button class="icon-button" title="Notifications">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge"></span>
                    </button>
                    <button class="icon-button theme-toggle" title="Toggle Theme">
                        <i class="fas fa-moon"></i>
                    </button>
                    <button class="avatar-button">
                        <div class="avatar">JD</div>
                    </button>
                </div>
            </div>

            <!-- Page Content -->
            <div class="page-content">
                <div class="page-header">
                    <div>
                        <h1>New Purchase Request</h1>
                        <p>Create a new procurement request</p>
                    </div>
                    <div class="action-buttons">
                        <button class="button outline" id="save-draft-btn">
                            <i class="fas fa-save"></i>
                            Save as Draft
                        </button>
                        <button class="button primary" id="submit-request-btn">
                            <i class="fas fa-paper-plane"></i>
                            Submit Request
                        </button>
                    </div>
                </div>

                <!-- Form Tabs -->
                <div class="tabs-container">
                    <div class="tabs">
                        <button class="tab-button active" data-tab="details">Request Details</button>
                        <button class="tab-button" data-tab="items">Items & Pricing</button>
                        <button class="tab-button" data-tab="attachments">Attachments</button>
                        <button class="tab-button" data-tab="review">Review & Submit</button>
                    </div>

                    <!-- Details Tab -->
                    <div class="tab-content active" id="details-tab">
                        <div class="card">
                            <div class="card-header">
                                <h3>Request Details</h3>
                                <p>Basic information about this purchase request</p>
                            </div>
                            <div class="card-content">
                                <div class="form-group">
                                    <label for="title">Request Title <span class="required">*</span></label>
                                    <input type="text" id="title" placeholder="Enter a descriptive title" required>
                                </div>
                                
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label for="department">Department <span class="required">*</span></label>
                                        <select id="department" required>
                                            <option value="">Select Department</option>
                                            <option value="IT">IT</option>
                                            <option value="Marketing">Marketing</option>
                                            <option value="Sales">Sales</option>
                                            <option value="HR">HR</option>
                                            <option value="Finance">Finance</option>
                                            <option value="Operations">Operations</option>
                                            <option value="R&D">R&D</option>
                                            <option value="Administration">Administration</option>
                                        </select>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="request-type">Request Type <span class="required">*</span></label>
                                        <select id="request-type" required>
                                            <option value="">Select Type</option>
                                            <option value="Hardware">Hardware</option>
                                            <option value="Software">Software</option>
                                            <option value="Services">Services</option>
                                            <option value="Office Supplies">Office Supplies</option>
                                            <option value="Furniture">Furniture</option>
                                            <option value="Travel">Travel</option>
                                            <option value="Other">Other</option>
                                        </select>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="priority">Priority</label>
                                        <select id="priority">
                                            <option value="low">Low</option>
                                            <option value="medium" selected>Medium</option>
                                            <option value="high">High</option>
                                            <option value="urgent">Urgent</option>
                                        </select>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="due-date">Required By Date</label>
                                        <input type="date" id="due-date">
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="justification">Business Justification <span class="required">*</span></label>
                                    <textarea id="justification" placeholder="Explain why this purchase is needed" rows="4" required></textarea>
                                </div>
                            </div>
                            <div class="card-footer">
                                <button class="button primary next-tab" data-next="items">
                                    Next: Items & Pricing
                                    <i class="fas fa-arrow-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Items & Pricing Tab -->
                    <div class="tab-content" id="items-tab">
                        <div class="card">
                            <div class="card-header">
                                <h3>Items & Pricing</h3>
                                <p>Add items to your purchase request</p>
                            </div>
                            <div class="card-content">
                                <div class="item-form">
                                    <div class="form-grid items-grid">
                                        <div class="form-group">
                                            <label for="item-description">Description <span class="required">*</span></label>
                                            <input type="text" id="item-description" placeholder="Item description">
                                        </div>
                                        <div class="form-group">
                                            <label for="item-quantity">Quantity <span class="required">*</span></label>
                                            <input type="number" id="item-quantity" min="1" value="1">
                                        </div>
                                        <div class="form-group">
                                            <label for="item-price">Unit Price <span class="required">*</span></label>
                                            <input type="number" id="item-price" step="0.01" min="0" placeholder="0.00">
                                        </div>
                                        <div class="form-group add-item-btn">
                                            <button class="button outline" id="add-item-btn">
                                                <i class="fas fa-plus"></i>
                                                Add Item
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="items-table-container">
                                    <table id="request-items-table">
                                        <thead>
                                            <tr>
                                                <th>Description</th>
                                                <th class="text-right">Quantity</th>
                                                <th class="text-right">Unit Price</th>
                                                <th class="text-right">Total</th>
                                                <th class="text-right">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="items-tbody">
                                            <!-- Items will be added here via JavaScript -->
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <td colspan="3" class="text-right font-medium">Total Amount</td>
                                                <td class="text-right font-medium" id="items-total">$0.00</td>
                                                <td></td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                                
                                <div class="empty-state" id="no-items">
                                    <i class="fas fa-shopping-cart fa-2x"></i>
                                    <p>No items added yet. Add some items to continue.</p>
                                </div>
                            </div>
                            <div class="card-footer">
                                <button class="button outline prev-tab" data-prev="details">
                                    <i class="fas fa-arrow-left"></i>
                                    Previous: Details
                                </button>
                                <button class="button primary next-tab" data-next="attachments">
                                    Next: Attachments
                                    <i class="fas fa-arrow-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Attachments Tab -->
                    <div class="tab-content" id="attachments-tab">
                        <div class="card">
                            <div class="card-header">
                                <h3>Attachments</h3>
                                <p>Upload supporting documents</p>
                            </div>
                            <div class="card-content">
                                <div class="dropzone" id="dropzone">
                                    <div class="dropzone-content">
                                        <i class="fas fa-cloud-upload-alt fa-2x"></i>
                                        <p>Drag & drop files here or click to browse</p>
                                        <p class="dropzone-hint">Supported formats: PDF, DOCX, XLSX, PNG, JPG (max 10MB)</p>
                                        <input type="file" id="file-upload" multiple style="display: none;">
                                        <button class="button outline small" id="browse-files">Browse Files</button>
                                    </div>
                                </div>
                                
                                <ul class="attachments-list" id="upload-list">
                                    <!-- Uploaded files will appear here -->
                                </ul>
                                
                                <div class="empty-state" id="no-uploads" style="display: none;">
                                    <p>No attachments added</p>
                                </div>
                            </div>
                            <div class="card-footer">
                                <button class="button outline prev-tab" data-prev="items">
                                    <i class="fas fa-arrow-left"></i>
                                    Previous: Items & Pricing
                                </button>
                                <button class="button primary next-tab" data-next="review">
                                    Next: Review & Submit
                                    <i class="fas fa-arrow-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Review & Submit Tab -->
                    <div class="tab-content" id="review-tab">
                        <div class="card">
                            <div class="card-header">
                                <h3>Review & Submit</h3>
                                <p>Please review your request before submitting</p>
                            </div>
                            <div class="card-content">
                                <div class="review-section">
                                    <h4>Request Details</h4>
                                    <div class="review-grid">
                                        <div class="review-item">
                                            <div class="review-label">Request Title</div>
                                            <div class="review-value" id="review-title">-</div>
                                        </div>
                                        <div class="review-item">
                                            <div class="review-label">Department</div>
                                            <div class="review-value" id="review-department">-</div>
                                        </div>
                                        <div class="review-item">
                                            <div class="review-label">Request Type</div>
                                            <div class="review-value" id="review-type">-</div>
                                        </div>
                                        <div class="review-item">
                                            <div class="review-label">Priority</div>
                                            <div class="review-value" id="review-priority">-</div>
                                        </div>
                                        <div class="review-item">
                                            <div class="review-label">Required By Date</div>
                                            <div class="review-value" id="review-due-date">-</div>
                                        </div>
                                    </div>
                                    
                                    <div class="review-item full-width">
                                        <div class="review-label">Business Justification</div>
                                        <div class="review-value justification-text" id="review-justification">-</div>
                                    </div>
                                </div>
                                
                                <div class="review-section">
                                    <h4>Items & Pricing</h4>
                                    <table class="review-table">
                                        <thead>
                                            <tr>
                                                <th>Description</th>
                                                <th class="text-right">Quantity</th>
                                                <th class="text-right">Unit Price</th>
                                                <th class="text-right">Total</th>
                                            </tr>
                                        </thead>
                                        <tbody id="review-items">
                                            <!-- Items will be added here via JavaScript -->
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <td colspan="3" class="text-right font-medium">Total Amount</td>
                                                <td class="text-right font-medium" id="review-total">$0.00</td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                    <div class="empty-state small" id="review-no-items" style="display: none;">
                                        <p>No items added</p>
                                    </div>
                                </div>
                                
                                <div class="review-section">
                                    <h4>Attachments</h4>
                                    <ul class="attachments-list small" id="review-attachments">
                                        <!-- Attachments will be added here via JavaScript -->
                                    </ul>
                                    <div class="empty-state small" id="review-no-attachments" style="display: none;">
                                        <p>No attachments added</p>
                                    </div>
                                </div>
                            </div>
                            <div class="card-footer">
                                <button class="button outline prev-tab" data-prev="attachments">
                                    <i class="fas fa-arrow-left"></i>
                                    Previous: Attachments
                                </button>
                                <button class="button primary" id="final-submit-btn">
                                    <i class="fas fa-paper-plane"></i>
                                    Submit Request
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <div class="toast-content">
            <div class="toast-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <div class="toast-message">
                <h4 id="toast-title">Success</h4>
                <p id="toast-description">Action completed successfully</p>
            </div>
        </div>
        <button class="toast-close">&times;</button>
    </div>

    <script src="/static/js/request-form.js"></script>
</body>
</html>
